{% extends "base.html" %}

{% block title %}{{ gettext('Il catalogo') }}{% endblock %}

{% block extra_head %}
<script>
    // Expose collection id to catalogue.js
    window.COLLECTION_ID = "{{ collection_id }}";
    const COLLECTION_ID = "{{ collection_id }}";
</script>
<script src="{{ url_for('static', filename='js/catalogue.js') }}" defer></script>
<style>
    /* On catalogue, no footer: remove reserved footer height on large screens */
    @media (min-width: 992px) {
        .catalogue-layout {
            height: calc(100vh - var(--header-h));
        }
    }
</style>
{% endblock %}

{% from 'macros/header_brand.html' import header_brand_collection %}
{% from 'macros/header_links.html' import header_collection_links %}
{% block header_brand %}
{{ header_brand_collection(collection_meta.id, collection_meta.image, collection_meta.nav_title) }}
{% endblock %}

{# Catalogue page: hide footer by overriding the block #}
{% block footer %}{% endblock %}

{% block header_links %}
{{ header_collection_links(collection_meta.id, 'catalogue') }}
{% endblock %}

{% block content %}
<section class="container-fluid px-0 catalogue-layout">
    <div class="row g-0">
        <!-- Filters sidebar -->
        <aside class="col-12 col-lg-3 border-end border-dark bg-dark text-light catalogue-sidebar">
            <div class="d-flex align-items-center justify-content-between px-3 py-3 border-bottom border-secondary">
                <h3 class="h6 m-0 sidebar-title">{{ gettext('Filtra la collezione') }}</h3>
                <div class="d-flex align-items-center gap-2">
                    <button id="apply-filters" class="btn btn-outline-light btn-sm">{{ gettext('Applica') }}</button>
                    <a id="clear-filters" href="#" class="clear-filters link-on-dark text-decoration-none">{{
                        gettext('Cancella') }} <span aria-hidden="true">Ã—</span></a>
                </div>
            </div>
            <div id="filter-groups"></div>
        </aside>

        <!-- Results -->
        <section class="col-12 col-lg-9 px-3 px-lg-4 py-3 catalogue-results">
            <div id="cards-container" class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3"></div>
            <div class="d-flex align-items-center justify-content-between mt-3">
                <button id="prev-page" class="btn btn-outline-dark btn-sm">{{ gettext('Precedente') }}</button>
                <span class="small" id="page-number">1 / 1</span>
                <button id="next-page" class="btn btn-outline-dark btn-sm">{{ gettext('Successivo') }}</button>
            </div>
        </section>
    </div>
</section>
{% endblock %}