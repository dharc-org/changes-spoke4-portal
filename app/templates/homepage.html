{% extends 'base.html' %}

{# Hide header links on homepage; keep only language dropdown #}
{% block header_links %}{% endblock %}

{% block content %}

<style>
    /* Minimal, page-scoped tweaks */
    #hpAccordion .accordion-button::after {
        display: none;
    }

    #hpAccordion .accordion-button {
        background-color: transparent;
        font-size: 1.5rem;
    }

    /* Extra bottom padding for Title & Objectives */
    #hp-hero {
        padding-bottom: 10rem;
    }

    /* Hide original static keywords when dynamic is inserted */
    .card .flex-grow-1 p.mb-2:nth-of-type(2) {
        display: none;
    }

    /* If the first dynamic keywords line is empty, re-show the static one */
    .card .flex-grow-1 p.mb-2:first-of-type:empty+p.mb-2 {
        display: block;
    }

    /* Technologies image with accent overlay matching mockup */
    .tech-image-wrap {
        position: relative;
        width: 558px;
        aspect-ratio: 558 / 324;
        border-radius: .25rem;
        overflow: hidden;
        max-width: 100%;
    }

    .tech-image-wrap img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }

    .tech-image-wrap::after {
        content: '';
        position: absolute;
        inset: 0;
        background: var(--color-accent);
        opacity: .38;
        /* optional: improve contrast on light images */
        mix-blend-mode: multiply;
        pointer-events: none;
    }
</style>
<!-- Title & Objectives -->
<section id="hp-hero" class="text-center pt-5 border-bottom border-dark px-5">
    <h1 class="h3 py-5 mb-5">{{ gettext('CHANGES Spoke 4') }}</h1>
    <div class="row g-5 justify-content-center">
        <!-- Objective 1 -->
        <div class="col-12 col-md-3">
            <div class="d-flex flex-column align-items-center text-center px-3">
                <div class="rounded-circle d-flex align-items-center justify-content-center mb-3"
                    style="width:72px;height:72px;background-color: var(--color-accent); color: #fff;">
                    <i class="bi bi-box" style="font-size: 1.75rem;"></i>
                </div>
                <div>
                    <div class="fw-semibold">{{ gettext('Digitalizzare e valorizzare il patrimonio in 3D') }}</div>
                    <small class="text-body-secondary d-block mt-2">{{ gettext('Creare una collezione digitale
                        tridimensionale che unisca modelli accurati, dati descrittivi e contesti storici, rendendo il
                        patrimonio culturale accessibile, documentato e interoperabile.') }}</small>
                </div>
            </div>
        </div>

        <!-- Objective 2 -->
        <div class="col-12 col-md-3">
            <div class="d-flex flex-column align-items-center text-center px-3">
                <div class="rounded-circle d-flex align-items-center justify-content-center mb-3"
                    style="width:72px;height:72px;background-color: var(--color-accent); color: #fff;">
                    <i class="bi bi-headset-vr" style="font-size: 1.75rem;"></i>
                </div>
                <div>
                    <div class="fw-semibold">{{ gettext('Costruire un ambiente narrativo e interattivo') }}</div>
                    <small class="text-body-secondary d-block mt-2">{{ gettext('Sviluppare uno spazio virtuale
                        navigabile dove i visitatori esplorano oggetti e relazioni attraverso storytelling e percorsi
                        immersivi, favorendo una comprensione esperienziale del patrimonio.') }}</small>
                </div>
            </div>
        </div>

        <!-- Objective 3 -->
        <div class="col-12 col-md-3">
            <div class="d-flex flex-column align-items-center text-center px-3">
                <div class="rounded-circle d-flex align-items-center justify-content-center mb-3"
                    style="width:72px;height:72px;background-color: var(--color-accent); color: #fff;">
                    <i class="bi bi-window" style="font-size: 1.75rem;"></i>
                </div>
                <div>
                    <div class="fw-semibold">{{ gettext('Definire un modello replicabile di digital twin') }}</div>
                    <small class="text-body-secondary d-block mt-2">{{ gettext('Progettare un metodo riutilizzabile per
                        integrare modellazione 3D, semantica e interazione; validato con l\'Aldrovandi Digital Twin, per
                        creare ambienti digitali evolutivi e interdisciplinari.') }}</small>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Collections -->
<section class="py-5 my-5 pt-5 px-5 home-collections">
    <div class="row gy-3 gx-4 justify-content-center">
        {% for c in collections %}
        <div class="col-12 col-md-auto d-flex">
            <div class="card border border-dark shadow-0 mx-auto {% if c.get('coming_soon') %}coming-soon-card position-relative{% endif %}"
                aria-disabled="{{ 'true' if c.get('coming_soon') else 'false' }}">
                {% if c.get('coming_soon') %}
                <span
                    class="badge text-bg-light border border-dark position-absolute top-0 end-0 m-2 small coming-soon-badge">{{
                    gettext('Prossimamente') }}</span>
                {% endif %}
                <div class="card-body d-flex gap-2 align-items-start">
                    {% if c.get('image') %}
                    <img src="{{ url_for('static', filename=c.get('image')) }}" alt="{{ c.display_title }}"
                        class="rounded flex-shrink-0" style="width:150px;height:150px;object-fit:cover;" />
                    {% else %}
                    <div class="bg-dark rounded flex-shrink-0" style="width:150px;height:150px;"></div>
                    {% endif %}
                    <div class="flex-grow-1">
                        <h2 class="h6 mb-1">{{ c.display_title }}</h2>
                        <p class="mb-2 small text-body-secondary font-sans">{% if c.display_keywords %}{{
                            c.display_keywords | join(' Ã¢â‚¬Â¢ ') }}{% endif %}</p>
                        <p class="mb-2 small text-body-secondary font-sans">Digital Library Ã¢â‚¬Â¢ 3D Ã¢â‚¬Â¢ Open
                            Access</p>
                        {% if c.get('coming_soon') %}
                        <span class="text-body-secondary small font-sans" aria-disabled="true">{{
                            gettext('Prossimamente') }}</span>
                        {% else %}
                        <a href="{{ url_for('main.collection_home', collection_id=c.id) }}"
                            class="link-dark fw-semibold font-sans text-decoration-none">{{ gettext('Esplora') }}
                            Ã¢â€ â€™</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>


<!-- Info Accordion -->
<section class="pb-5 mb-5">
    <div class="accordion accordion-flush font-sans" id="hpAccordion">
        <div class="accordion-item px-3 border-top border-bottom border-dark-subtle">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#accOne" aria-expanded="false" aria-controls="accOne">
                    {{ gettext('Descrizione delle attivitÃƒÂ  di metadatazione') }}
                    <i class="bi bi-chevron-down ms-auto"></i>
                </button>
            </h2>
            <div id="accOne" class="accordion-collapse collapse" data-bs-parent="#hpAccordion">
                <div class="accordion-body text-body-secondary font-sans">{{ gettext('Testo segnaposto per
                    descrivere le
                    attivitÃƒÂ  di metadatazione.') }}</div>
            </div>
        </div>
        <div class="accordion-item px-3 border-bottom border-dark-subtle">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#accTwo" aria-expanded="false" aria-controls="accTwo">
                    {{ gettext('Standard adottati') }}
                    <i class="bi bi-chevron-down ms-auto"></i>
                </button>
            </h2>
            <div id="accTwo" class="accordion-collapse collapse" data-bs-parent="#hpAccordion">
                <div class="accordion-body text-body-secondary font-sans">{{ gettext('Elenco degli standard adottati
                    - testo
                    segnaposto.') }}</div>
            </div>
        </div>
        <div class="accordion-item px-3 border-bottom border-dark-subtle">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#accThree" aria-expanded="false" aria-controls="accThree">
                    {{ gettext('Dettagli sulla validazione semantica') }}
                    <i class="bi bi-chevron-down ms-auto"></i>
                </button>
            </h2>
            <div id="accThree" class="accordion-collapse collapse" data-bs-parent="#hpAccordion">
                <div class="accordion-body text-body-secondary font-sans">{{ gettext('Informazioni sulla validazione
                    semantica
                    - testo segnaposto.') }}</div>
            </div>
        </div>
        <div class="accordion-item px-3 border-bottom border-dark-subtle">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#accFour" aria-expanded="false" aria-controls="accFour">
                    {{ gettext('API per accesso ai dati in tempo reale') }}
                    <i class="bi bi-chevron-down ms-auto"></i>
                </button>
            </h2>
            <div id="accFour" class="accordion-collapse collapse" data-bs-parent="#hpAccordion">
                <div class="accordion-body text-body-secondary font-sans">{{ gettext('Dettagli sulle API e accesso
                    ai dati -
                    testo segnaposto.') }}</div>
            </div>
        </div>
    </div>
</section>

<!-- Technologies -->
<section class="py-5 my-5 px-5">
    <div class="row align-items-center g-1 justify-content-center">
        <div class="col-12 col-md-5 col-lg-6 d-flex justify-content-center">
            <div class="tech-image-wrap">
                <img src="{{ url_for('static', filename='img/01.png') }}" alt="{{ gettext('Tecnologie - immagine') }}">
            </div>
        </div>
        <div class="col-12 col-md-7 col-lg-5">
            <ul class="list-unstyled mb-0 font-sans tech-list">
                <li class='fw-semibold'>{{ gettext('Tecnologie di acquisizione') }}</li>
                <li><i>{{ gettext('Fotogrammetria') }}</i> &ndash; {{ gettext("Acquisizione digitale della forma e delle
                    dimensioni di un oggetto tramite fotografie scattate da diverse angolazioni.") }}</li>
                <li><i>{{ gettext('Scanner a luce strutturata') }}</i> &ndash; {{ gettext("Scansione 3D tramite
                    proiezione
                    di
                    pattern luminosi per rilevare la geometria superficiale.") }}</li>
                <li><i>{{ gettext('Laser scanner') }}</i> &ndash; {{ gettext("Rilievo 3D ad alta precisione tramite
                    misurazione del ritorno del raggio laser.") }}</li>

                <li class='fw-semibold'>{{ gettext('Tecnologie di elaborazione') }}</li>
                <li><i>{{ gettext("Software per editing, elaborazione e allineamento output
                        fotogrammetrico") }}</i> &ndash; {{ gettext('Photoshop, RawTherapee, 3DF Zephyr, Metashape') }}
                </li>
                <li><i>{{ gettext("Software per elaborazione e allineamento output da scanner a luce
                        strutturata") }}</i> &ndash; {{ gettext('Artec Studio') }}</li>
                <li><i>{{ gettext("Software per elaborazione e allineamento output da laser
                        scanner") }}</i> &ndash; {{ gettext('SCENE') }}</li>
                <li>{{ gettext('Output: Mesh 3D ad alta densitÃƒÂ  geometrica texturizzata') }}</li>

                <li class='fw-semibold'>{{ gettext('Tecnologie di modellazione 3D ed esportazione') }}</li>
                <li><i>{{ gettext('Software') }}</i> &ndash; {{ gettext('Blender') }}</li>

                <li class='fw-semibold'>{{ gettext('Tecnologie di ottimizzazione') }}</li>
                <li><i>{{ gettext('Software') }}</i> &ndash; {{ gettext('Instant Meshes, Photoshop, Gimp, 3DF
                    Zephyr, Artec Studio') }}</li>

                <li class='fw-semibold'>{{ gettext('Tecnologie di presentazione e sviluppo') }}</li>
                <li><i>{{ gettext('Software') }}</i> &ndash; {{ gettext('ATON framework, MELODY API') }}</li>

                <li class='fw-semibold'>{{ gettext('Tecnologie di prototipazione') }}</li>
            </ul>
        </div>
    </div>
</section>

{% endblock %}