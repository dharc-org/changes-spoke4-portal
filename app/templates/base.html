<!DOCTYPE html>
<html lang="{{ get_locale() }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ gettext('Portale dello Spoke 4') }}{% endblock %}</title>

    <!-- Bootstrap CSS (local) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='vendor/bootstrap/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='vendor/bootstrap-icons/bootstrap-icons.min.css') }}">
    <!-- Custom CSS (design tokens + light overrides) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_head %}{% endblock %}
    <!-- Base app JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
    <style>
        /* Tiny utility to use secondary font where needed */
        .font-sans {
            font-family: 'Work Sans', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        }

        /* Accent underline for active header links */
        .active-accent {
            text-decoration: underline !important;
            text-decoration-color: var(--color-accent) !important;
            text-underline-offset: 4px;
            text-decoration-thickness: 2px;
        }
    </style>
</head>

<body class="d-flex flex-column min-vh-100">
    <!-- Header -->
    <header class="container-fluid bg-body border-bottom border-dark sticky-top">
        <div class="row g-0 align-items-stretch">
            <!-- Logo / Title -->
            <div
                class="col-12 col-lg-3 d-flex align-items-center justify-content-start px-4 py-3 border-lg-end border-dark">
                {% block header_brand %}
                <a href="{{ url_for('main.homepage') }}"
                    class="d-inline-flex align-items-center text-body text-decoration-none">
                    <span class="rounded-circle bg-dark me-2" style="width:16px;height:16px;"></span>
                    <span class="fw-semibold">PROJECT CHANGES - SPOKE 4</span>
                </a>
                {% endblock %}
            </div>
            <!-- Center spacer -->
            <div
                class="d-none d-lg-flex col-lg-6 align-items-center justify-content-center px-4 py-3 border-lg-start border-lg-end border-dark">
            </div>
            <!-- Navigation + Language -->
            <nav
                class="col-12 col-lg-3 d-flex align-items-center justify-content-between justify-content-lg-end pl-4 py-3 border-lg-start border-dark gap-3">
                {% block header_links %}
                <ul class="nav gap-3 small font-sans flex-nowrap text-nowrap mb-0">
                    <li class="nav-item"><a class="nav-link px-0 text-body" href="/">{{ gettext('Il progetto') }}</a>
                    </li>
                    <li class="nav-item"><a class="nav-link px-0 text-body" href="/projects">{{ gettext('I casi
                            applicativi') }}</a></li>
                    <li class="nav-item"><a class="nav-link px-0 text-body" href="/contact">{{ gettext('Contatti e
                            informazioni') }}</a></li>
                </ul>
                {% endblock %}
                {% set _lang = get_locale() %}
                <div class="dropdown ms-lg-3 ms-auto">
                    <button class="btn btn-outline-dark btn-sm rounded-pill dropdown-toggle px-3" type="button"
                        data-bs-toggle="dropdown" aria-expanded="false" aria-label="Select language">
                        {{ 'IT' if _lang == 'it' else 'EN' }}
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            {% if _lang == 'it' %}
                            <span class="dropdown-item active" aria-current="true">IT</span>
                            {% else %}
                            <a class="dropdown-item" href="{{ url_for('main.set_language', lang='it') }}">IT</a>
                            {% endif %}
                        </li>
                        <li>
                            {% if _lang == 'en' %}
                            <span class="dropdown-item active" aria-current="true">EN</span>
                            {% else %}
                            <a class="dropdown-item" href="{{ url_for('main.set_language', lang='en') }}">EN</a>
                            {% endif %}
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <main class="flex-grow-1">
        {% block content %}{% endblock %}
    </main>

    {% block footer %}
    <!-- New footer (logos left/center, text right) -->
    <footer class="site-footer bg-dark text-white py-5 mt-auto">
        <style>
            .site-footer .footer-logo {
                height: 64px;
                width: auto;
            }

            .site-footer .footer-logo-center {
                height: 48px;
                width: auto;
            }
        </style>
        <div class="container-xxl">
            <div class="row align-items-center gy-4">
                <div class="col-12 col-md-4 d-flex justify-content-center justify-content-md-start">
                    <img class="footer-logo" src="{{ url_for('static', filename='img/logo_unibo.png') }}"
                        alt="{{ gettext('Logo Unibo') }}">
                </div>
                <div class="col-12 col-md-4 d-flex justify-content-center">
                    <img class="footer-logo-center" src="{{ url_for('static', filename='img/logo_changes.png') }}"
                        alt="{{ gettext('Logo Changes') }}">
                </div>
                <div class="col-12 col-md-4 d-flex justify-content-center justify-content-md-end">
                    <a class="link-light small text-decoration-none" href="#">{{ gettext('contatto diretto') }}</a>
                </div>
            </div>
        </div>
    </footer>
    {% endblock %}

    <!-- Bootstrap JS Bundle (local) -->
    <script src="{{ url_for('static', filename='vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>

</body>

</html>